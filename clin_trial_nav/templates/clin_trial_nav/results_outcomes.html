{% extends "clin_trial_nav/results.html" %}

{% block tablecontent %}

<div class="row">
    <div class="col-md px-5 mx-5">
        <p>Type something in the input field to search Clinical Trial Outcomes:</p>  
        <input class="form-control" id="myInput" onkeyup="myFunction()" type="text" placeholder="Search...">
        <br>
    </div>
</div>

<div class="row justify-content-center">
    <div class="col-auto tableFixHead table-responsive">
        <table id="bigTable" data-toggle="table" class="table table-dark table-striped table-hover mx-0">
            <thead class="thead-dark">
              <tr>
                <th class="text-center">Rank</th>
                <th class="text-center">NCTId</th>
                <th class="text-center title_header">Brief Title</th>
                <th class="text-center">Condition</th>
                <th class="text-center">Phase</th>
                <th class="text-center">Study Type</th>
                <th class="text-center">Enrollment Count</th>
                <th class="text-center">Start Date</th>
                <th class="text-center">Primary Completion Date</th>
                <th class="text-center">Eligibility Criteria</th>
                <th class="text-center">Intervention Name</th>
                <th class="text-center">Arm Group Intervention Name</th>
                <th class="text-center">Arm Group Description</th>
                <th class="text-center">Intervention Arm Group Label</th>
                <th class="text-center">Outcome Measure Toggle</th>
                <th class="text-center">Outcome Measure Type</th>
                <th class="text-center">Outcome Measure Title</th>
                <th class="text-center">Outcome Measure Description</th>
                <th class="text-center">Outcome Measure Time Frame</th>
                <th class="text-center">Outcome Measure Value</th>
                <th class="text-center">Outcome Measure Unit of Measure</th>
              </tr>
            </thead>
            
            <tbody id="myTable">
            {% if o %}  
            {% for row in o %}

              <tr>
                <td>{{row.Rank}}</td>
                <td>{{row.NCTId}}</td>
                <td class="td_hidden title_column {% cycle 'bg-two' 'bg-dark'%}"><span>{{row.BriefTitle}}</span></td>
                <td class="td_hidden">{{row.Condition}}</td>
                <td>{{row.Phase}}</td>
                <td>{{row.StudyType}}</td>
                <td>{{row.EnrollmentCount}}</td>
                <td>{{row.StartDate}}</td>
                <td>{{row.PrimaryCompletionDate}}</td>
                <td class="td_hidden"><span>{{row.EligibilityCriteria}}</span></td>
                <td class="td_hidden">{{row.InterventionName}}</td>
                <td class="td_hidden">{{row.ArmGroupInterventionName}}</td>
                <td class="td_hidden"><span>{{row.ArmGroupDescription}}</span></td>
                <td class="td_hidden">{{row.InterventionArmGroupLabel}}</td>
                <td class="td_hidden"><button class="btn btn-primary" data-toggle="collapse" data-target="#collapse{{forloop.counter0}}">Toggle Outcomes</button></td>
                <td class="td_hidden"><span>{{row.OutcomeMeasureType}}</span></td>
                <td class="td_hidden"><span>{{row.OutcomeMeasureTitle}}</span></td>
                <td class="td_hidden"><span>{{row.OutcomeMeasureDescription}}</span></td>
                <td class="td_hidden"><span>{{row.OutcomeMeasureTimeFrame}}</span></td>
                <td class="td_hidden"><span>{{row.OutcomeMeasurementValue}}</span></td>
                <td class="td_hidden"><span>{{row.OutcomeMeasureUnitOfMeasure}}</span></td>
              </tr>

              {% if row.OutcomeMeasureType %}
                    {% for outcome_measure in row.OutcomeMeasureType %}
                      <tr class="collapse" id="collapse{{forloop.parentloop.counter0}}">
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>{{row['OutcomeMeasureType'][loop.index0]}}</td>
                        <td>{{row.OutcomeMeasureTitle[loop.index0]}}</td>
                        <td>{{row.OutcomeMeasureDescription[loop.index0]}}</td>
                        <td>{{row.OutcomeMeasureTimeFrame[loop.index0]}}</td>
                        
                        <td>{{row.OutcomeMeasurementValue[loop.index0]}}</td>
                        
                        <td>{{row.OutcomeMeasureUnitOfMeasure[loop.index0]}}</td>
                      </tr>
                    {% endfor %}
                  {% endif %}
                        
            {% endfor %}
            {% endif %}
          </tbody>
        </table>
    </div>
</div>

{% endblock tablecontent %}


<!-- INSERT NEW ROW OF OUTCOME TABLE RESULTS HERE, BASED ON SELECTIVE CRITERIA
{% if row.OutcomeMeasureType %}
{% for outcome_measure_type in row.OutcomeMeasureType %}
    <tr class="collapse" id="collapse{{forloop.parentloop.counter0}}">
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>{{outcome_measure_type}}</td>
        <td>{{row.OutcomeMeasureTitle..forloop.counter0}}</td>
        <td>{{row.OutcomeMeasureDescription..forloop.counter0}}</td>
        <td>{{row.OutcomeMeasureTimeFrame..forloop.counter0}}</td>
        <td>{{row.OutcomeMeasurementValue..forloop.counter0}}</td>
        <td>{{row.OutcomeMeasureUnitOfMeasure..forloop.counter0}}</td>
    </tr>
{% endfor %}

{% endif %}
               
{% endblock %} -->